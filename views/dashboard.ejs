<!doctype html>
<html lang="en" class="no-js" ng-app='Monitor'>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="libs/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="libs/flat-ui/dist/css/flat-ui.min.css">
    <link rel="stylesheet" href="libs/c3/c3.min.css">
    <link rel="stylesheet" href="css/reset.css"> <!-- CSS reset -->
    <link rel="stylesheet" href="css/style.css">

    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700' rel='stylesheet' type='text/css'>

    <title>HDX Monitor</title>
</head>
<body>

    <header class="cd-header">
        <!-- service alert -->
        <div class="service-status-container" ng-controller="StatusAlertController as status">
            <script> var service = 'dataset_age' </script>
            <a class="status-icon" href="#" ng-init="status.check('dataset_age')" id='status-alert'></a>
            <div class="alert-container" id="alert-container"></div>
        </div>
        <!-- menu -->
        <a href="#0" class="cd-3d-nav-trigger">
            Menu
            <span></span>
        </a>
    </header> <!-- .cd-header -->

    <nav class="cd-3d-nav-container">
        <ul class="cd-3d-nav">
            <li class="cd-selected">
                <a href="/">Dashboard</a>
            </li>

            <li>
                <a href="#0">Users</a>
            </li>

            <li>
                <a href="#0">Organizations</a>
            </li>

            <li>
                <a href="/datastore">DataStores</a>
            </li>

            <li>
                <a href="#0">Settings</a>
            </li>
        </ul> <!-- .cd-3d-nav -->

        <span class="cd-marker color-1"></span>
    </nav> <!-- .cd-3d-nav-container -->


    <main ng-controller="DashboardController as dashboard">

        <h1>Freshness Dashboard</h1>

            <div class="pod-container">
                <div class="pod-column">
                    <div class="pod border-delinquent">
                        <div class="pod-header">
                            <div class="pod-state bg-delinquent">
                                <span class="pod-state-title">Delinquent</span>
                            </div>
                            <div class="pod-name">
                                <span class="ember-view">
                                  <span ng-show="dashboard.success"> {{ dashboard.delinquent.length }} </span>
                                  Datasets
                                </span>
                            </div>
                        </div>

                        <div class="pod-info"
                          ng-controller="ModalController as modal"
                          ng-repeat="dataset in dashboard.delinquent"
                          ng-mouseover="dashboard.hoverIn(dataset)"
                          ng-mouseleave="dashboard.hoverOut(dataset)"
                          ng-click="modal.open(dataset.id)"
                          style="cursor:pointer;">

                            <div class="pod-info-dataset-title">
                                {{ dataset.name }}
                            </div>
                            <!-- <div class="pod-scraper-icon">test</div> -->
                            <div class="pod-info-assets">
                              <span class="pod-info-frequency-category">
                                {{ dataset.frequency_label }}
                              </span>

                              <span class="pad-info-last-edit" ng-show="dataset.hover_last_updated">
                                Last edited <span am-time-ago="dataset.last_updated"></span>.
                                <!-- Last edited: {{ dataset.last_updated | amDateFormat:'dddd, MMMM Do YYYY, h:mm a' }} -->
                              </span>

                              <span class="pod-info-age">
                                <b>{{ dataset.age }}</b> days old
                              </span>

                              <!-- <span class="scraper-icon"></span> -->

                            </div>
                        </div>

                    </div>
                </div>
                <div class="pod-column">
                    <div class="pod border-overdue">
                        <div class="pod-header">
                            <div class="pod-state bg-overdue">
                                <span class="pod-state-title">Overdue</span>
                            </div>
                            <div class="pod-name">
                                <span class="ember-view">
                                  <span ng-show="dashboard.success"> {{ dashboard.overdue.length }} </span>
                                  Datasets
                                </span>
                            </div>
                        </div>

                         <div class="pod-info"
                           ng-repeat="dataset in dashboard.overdue"
                           ng-mouseover="dashboard.hoverIn(dataset)"
                           ng-mouseleave="dashboard.hoverOut(dataset)"
                           ng-click="dashboard.go('https://data.hdx.rwlabs.org/dataset/' + dataset.id)"
                           style="cursor:pointer;">

                            <div class="pod-info-dataset-title">
                                {{ dataset.name }}
                            </div>
                            <!-- <div class="pod-scraper-icon">test</div> -->
                            <div class="pod-info-assets">
                              <span class="pod-info-frequency-category">
                                {{ dataset.frequency_label }}
                              </span>

                              <span class="pad-info-last-edit" ng-show="dataset.hover_last_updated">
                                Last edited <span am-time-ago="dataset.last_updated"></span>.
                                <!-- Last edited: {{ dataset.last_updated | amDateFormat:'dddd, MMMM Do YYYY, h:mm a' }} -->
                              </span>

                              <span class="pod-info-age">
                                <b>{{ dataset.age }}</b> days old
                              </span>

                              <!-- <span class="scraper-icon"></span> -->

                            </div>
                        </div>
                    </div>

                </div>

                <div class="pod-column">
                    <div class="pod border-due">
                        <div class="pod-header">
                            <div class="pod-state bg-due">
                                <span class="pod-state-title">Due</span>
                            </div>
                            <div class="pod-name">
                                <span class="ember-view">
                                  <span ng-show="dashboard.success"> {{ dashboard.due.length }} </span>
                                  Datasets
                                </span>
                            </div>
                        </div>

                        <div class="pod-info"
                          ng-repeat="dataset in dashboard.due"
                          ng-mouseover="dashboard.hoverIn(dataset)"
                          ng-mouseleave="dashboard.hoverOut(dataset)"
                          ng-click="dashboard.go('https://data.hdx.rwlabs.org/dataset/' + dataset.id)"
                          style="cursor:pointer;">

                           <div class="pod-info-dataset-title">
                               {{ dataset.name }}
                           </div>
                           <!-- <div class="pod-scraper-icon">test</div> -->
                           <div class="pod-info-assets">
                             <span class="pod-info-frequency-category">
                               {{ dataset.frequency_label }}
                             </span>

                             <span class="pad-info-last-edit" ng-show="dataset.hover_last_updated">
                               Last edited <span am-time-ago="dataset.last_updated"></span>.
                               <!-- Last edited: {{ dataset.last_updated | amDateFormat:'dddd, MMMM Do YYYY, h:mm a' }} -->
                             </span>

                             <span class="pod-info-age">
                               <b>{{ dataset.age }}</b> days old
                             </span>

                             <!-- <span class="scraper-icon"></span> -->

                           </div>
                       </div>

                    </div>

                </div>

                <div class="pod-column">
                    <div class="pod border-uptodate">
                        <div class="pod-header">
                            <div class="pod-state bg-uptodate">
                                <span class="pod-state-title">Up-to-Date</span>
                            </div>
                            <div class="pod-name">
                                <span class="ember-view">
                                  <span ng-show="dashboard.success"> {{ dashboard.uptodate.length }} </span>
                                  Datasets</span>
                            </div>
                        </div>

                         <div class="pod-info"
                           ng-repeat="dataset in dashboard.uptodate"
                           ng-mouseover="dashboard.hoverIn(dataset)"
                           ng-mouseleave="dashboard.hoverOut(dataset)"
                           ng-click="dashboard.go('https://data.hdx.rwlabs.org/dataset/' + dataset.id)"
                           style="cursor:pointer;">

                            <div class="pod-info-dataset-title">
                                {{ dataset.name }}
                            </div>
                            <!-- <div class="pod-scraper-icon">test</div> -->
                            <div class="pod-info-assets">
                              <span class="pod-info-frequency-category">
                                {{ dataset.frequency_label }}
                              </span>

                              <span class="pad-info-last-edit" ng-show="dataset.hover_last_updated">
                                Last edited <span am-time-ago="dataset.last_updated"></span>.
                                <!-- Last edited: {{ dataset.last_updated | amDateFormat:'dddd, MMMM Do YYYY, h:mm a' }} -->
                              </span>

                              <span class="pod-info-age">
                                <b>{{ dataset.age }}</b> days old
                              </span>

                              <!-- <span class="scraper-icon"></span> -->

                            </div>
                        </div>


                    </div>
                </div>

            </div>

            <div class="pod-container">

            <div class="pod-column-archived">
                <div class="pod border-archived">
                    <div class="pod-header">
                        <div class="pod-state bg-archived">
                            <span class="pod-state-title">Archived</span>
                        </div>
                        <div class="pod-name-archived">
                            <span class="ember-view">
                              <span ng-show="dashboard.success"> {{ dashboard.archived.length }} </span>
                              Datasets
                            </span>
                            <div class="pod-archive-search-bar">
                              <input type="text" class="form-control login-field" value="" ng-model="searchText" placeholder="Search">
                            </div>
                        </div>
                    </div>

                    <div class="pod-info"
                      ng-repeat="dataset in dashboard.archived | filter:searchText"
                      ng-mouseover="dashboard.hoverIn(dataset)"
                      ng-mouseleave="dashboard.hoverOut(dataset)"
                      ng-click="dashboard.go('https://data.hdx.rwlabs.org/dataset/' + dataset.id)"
                      style="cursor:pointer;">

                        <div class="pod-info-dataset-title">

                            {{ dataset.name }}

                        </div>
                        <!-- <div class="pod-scraper-icon">test</div> -->
                        <div class="pod-info-assets">
                          <span class="pod-info-frequency-category">
                            {{ dataset.frequency_label }}
                          </span>

                          <span class="pad-info-last-edit" ng-show="dataset.hover_last_updated">
                            Last edited <span am-time-ago="dataset.last_updated"></span>.
                            <!-- Last edited: {{ dataset.last_updated | amDateFormat:'dddd, MMMM Do YYYY, h:mm a' }} -->
                          </span>

                          <span class="pod-info-age">
                            <b>{{ dataset.age }}</b> days old
                          </span>

                          <!-- <span class="scraper-icon"></span> -->

                        </div>
                    </div>

                </div>
            </div>

            </div>

            <div ng-controller="ModalController as modal">
              <!-- <button type="button" class="btn btn-default" ng-click="modal.open()">Open me!</button> -->
              <!-- <button type="button" class="btn btn-default" ng-click="modal.open('lg')">Large modal</button> -->
              <!-- <button type="button" class="btn btn-default" ng-click="modal.open('sm')">Small modal</button> -->
              <!-- <div ng-show="selected">Selection from a modal: {{ modal.selected }}</div> -->
            </div>

        </body>

    </main>

    <!-- UI dependencies -->
    <script src="libs/jquery/dist/jquery.min.js"></script>
    <script src="js/modernizr.js"></script>
    <script src="libs/flat-ui/dist/js/flat-ui.min.js"></script>
    <script src="js/main.js"></script> <!-- Resource jQuery -->
    <script src="js/create-ui.js"></script>

    <!-- angular -->
    <script src="libs/angular/angular.min.js"></script>

    <!-- Angular dependencies. -->
    <script src="libs/ngprogress/build/ngprogress.min.js"></script>
    <script src="libs/moment/moment.js"></script>
    <script src="libs/angular-moment/angular-moment.js"></script>
    <script src="libs/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>

    <!-- modules -->
    <script src="modules/app.js"></script>

    <!-- controllers -->
    <script src="controllers/status_alert.js"></script>
    <script src="controllers/dashboard.js"></script>


    <script type="text/ng-template" id="test.html">
      <div class="modal-header">
          <h3 class="modal-title">{{ dataset.title }}</h3>
      </div>
      <div class="modal-body">
          {{ dataset.notes }}
      </div>
      <div class="modal-footer">
          <button class="btn btn-primary" type="button" ng-click="visit()">View Dataset</button>
          <button class="btn btn-primary" type="button" ng-click="email()">Email Maintainer</button>
          <button class="btn btn-primary" type="button" ng-click="archive()">Change Frequency</button>
      </div>

    </script>


</body>
</html>




