<!doctype html>
<html lang="en" class="no-js" ng-app="Monitor">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--

    STYLES: ==============================================

    Here we are loading all of our styles. It includes
    the Raleway font from Google Fonts, Bootstrap (3+),
    Font Awesome, and the FlatUI CSS.

    The style.css file includes the main custom styles
    developed for this application.

    ======================================================

    -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="libs/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="libs/flat-ui/dist/css/flat-ui.min.css">
    <link rel="stylesheet" href="libs/c3/c3.min.css">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css">

    <title>HDX Monitor | Datastore</title>
</head>
<body>
    <header class="cd-header">
        <!--

        SERVICE ALERT: =============================================

        Here we are calling a specific controller that functions
        only to display information to the user about the current
        service status. At the moment, it is only capable of checking
        the online status of a single service. The service id has
        to be passed as a variable called `service`.

        ============================================================

        -->
        <div class="service-status-container" ng-controller="StatusAlertController as status">
            <script> var service = 'datastore' </script>
            <a class="status-icon" href="#" ng-init="status.check('orgstats')" id='status-alert'></a>
            <div class="alert-container" id="alert-container"></div>
        </div>

        <a href="#0" class="cd-3d-nav-trigger">
            Menu
            <span></span>
        </a>
    </header> <!-- .cd-header -->

    <main ng-controller="DataStoreController as datastore">

        <h1>Create a DataStore</h1>

        <div class="datastore-message">
          <h3 ng-show="datastore.message">
            <span style="color:#cccccc;" class="fa fa-check" ng-show="datastore.success"></span>
            <span style="color:#cccccc;" class="fa fa-warning" ng-show="datastore.failure"></span>
              {{ datastore.message }}
          </h3>
        </div>

        <div class="login-form">
          <form class="form-group">
            <input type="text" class="form-control login-field" value="" ng-model="datastore.resourceid" placeholder="HDX Resource ID" name="resourceid" id="resourceid">
            <label class="login-field-icon fui-info-circle" for="login-name"></label>
            <br>

            <div ng-show="datastore.field_index">
              <div class="row schema-header">
                <h2 class="schema-title">Define Schema</h2>
                <div class="schema-add-field"> <a href="" ng-click="datastore.add_schema_field()"><span class="fa fa-plus"> Add field</span></a></div>
              </div>
              <div class="row">
                <div class="col-xs-6">
                  <h2 class="schema-field-title">field</h2>
                </div>
                <div class="col-xs-6">
                  <h2 class="schema-field-title">type</h2>
                </div>
              </div>

              <div class="row schema-fields">
                <fieldset  data-ng-repeat="field in datastore.fields">

                    <div class="row">
                      <div class="col-xs-6">
                      <input type="text" ng-model="field.field_name" class="form-control login-field schema-field-id">
                    </div>

                   <div class="col-xs-5">
                     <select class="select-type form-control select select-primary" ng-model="field.type">
                       <option>text</option>
                       <option>json</option>
                       <option>date</option>
                       <option>time</option>
                       <option>timestamp</option>
                       <option>int</option>
                       <option>float</option>
                       <option>bool</option>
                     </select>
                   </div>

                   <div class="col-xs-1">
                     <button class="remove-fields" ng-show="$last" ng-click="datastore.remove_schema_field()">-</button>
                   </div>
                   </div>


                </fieldset>
              </div>
            </div>

            <div class="row">
                <div class="col-xs-6">
                  <button type="submit" class="btn btn-primary btn-lg btn-block" id="create-datastore-button" ng-click="datastore.submit()">Create DataStore</button>
                </div>
                <div class="col-xs-6">
                  <button class="btn btn-inverse btn-lg btn-block" ng-click="datastore.add_schema_field()">
                  Define Schema
                  </button>
                </div>
            </div>
          </form>

          <a class="login-link" href="https://github.com/luiscape/hdx-monitor-datastore">Source code.</a>

          <div id="datastore-status-box"></div>
        </div>


    </main>

    <nav class="cd-3d-nav-container">
        <ul class="cd-3d-nav">
            <li>
                <a href="/dashboard">Dashboard</a>
            </li>

            <li>
                <a href="/users">Users</a>
            </li>

            <li>
                <a href="/organizations">Organizations</a>
            </li>

            <li class="cd-selected">
                <a href="#0">DataStores</a>
            </li>

            <li>
                <a href="/settings">Settings</a>
            </li>
        </ul>

        <span class="cd-marker color-1"></span>
    </nav>

    <!-- FlatUI dependencies -->
    <script src="libs/jquery/dist/jquery.min.js"></script>
    <script src="js/modernizr.js"></script>
    <script src="libs/flat-ui/dist/js/flat-ui.min.js"></script>
    <script src="js/main.js"></script>
    <script src="js/create-ui.js"></script>

    <!-- Charting dependencies. -->
    <script src="libs/d3/d3.min.js"></script>
    <script src="libs/c3/c3.min.js"></script>

    <!-- Angular -->
    <script src="libs/angular/angular.min.js"></script>

    <!-- Angular dependencies. -->
    <script src="libs/moment/moment.js"></script>
    <script src="libs/ng-csv/build/ng-csv.min.js"></script>
    <script src="libs/angular-moment/angular-moment.js"></script>
    <script src="libs/ngprogress/build/ngprogress.js"></script>
    <script src="libs/showdown/compressed/Showdown.min.js"></script>
    <script src="libs/angular-markdown-directive/markdown.js"></script>
    <script src="libs/angular-animate/angular-animate.min.js"></script>
    <script src="libs/angular-sanitize/angular-sanitize.min.js"></script>
    <script src="libs/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>

    <!-- modules -->
    <script src="modules/app.js"></script>

    <!-- controllers -->
    <script src="controllers/status_alert.js"></script>
    <script src="controllers/datastore.js"></script>


</body>
</html>


